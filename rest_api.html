<!doctype html>
<html>
  <head>
    <title>REST API</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      body { margin: 0; padding: 0; }
    </style>
  </head>
  <body>
    <redoc
           
           
           hide-hostname
           
           
           
           
           
           
           >
    </redoc>

    <script src="_static/redoc.js"></script>
    
    <script type="application/json" id="spec">
    {"openapi": "3.0.3", "info": {"title": "Topic Explorer Server API", "description": "OpenAPI documentation derived from `topicexplorer/server.py` in the InPhO Topic Explorer project. This server is implemented with Bottle and exposes a mix of JSON/CSV data endpoints plus a few HTML/static/document-serving routes.\n", "version": "0.1.0"}, "servers": [{"url": "http://localhost:8000", "description": "Default local server (typical `topicexplorer launch` default)"}], "tags": [{"name": "Models", "description": "Endpoints parameterized by model size `k` (number of topics)"}, {"name": "Topics", "description": "Topic and topic-query endpoints"}, {"name": "Documents", "description": "Document metadata and similarity endpoints"}, {"name": "UI", "description": "HTML and static resources used by the Topic Explorer UI"}, {"name": "Corpus", "description": "Corpus / fulltext serving"}], "paths": {"/{k}/doc_topics/{doc_id}": {"get": {"tags": ["Models", "Documents"], "summary": "Get topic mixture for a document (CSV)", "description": "Returns a CSV of (topic, prob) for the given document in model `k`. Supports conditional requests via ETag / If-None-Match.\n", "operationId": "getDocTopicsCsv", "parameters": [{"$ref": "#/components/parameters/K"}, {"name": "doc_id", "in": "path", "required": true, "description": "Document identifier (label).", "schema": {"type": "string"}}], "responses": {"200": {"description": "CSV content", "headers": {"Etag": {"description": "ETag for the model view (phi/theta-based)", "schema": {"type": "string"}}}, "content": {"text/csv": {"schema": {"type": "string", "description": "CSV with header `topic,prob`"}, "examples": {"sample": {"value": "topic,prob\n0,0.012345\n1,0.034567\n"}}}}}, "304": {"description": "Not Modified (If-None-Match matched)"}, "400": {"description": "Invalid model `k` (no model for k)"}}}}, "/{k}/docs/{doc_id}": {"get": {"tags": ["Models", "Documents"], "summary": "Get document similarity list (CSV)", "description": "Returns a CSV of (doc, prob) for documents similar to `doc_id` in model `k`. A fixed threshold (default 0.2 in code) filters out low-probability items. Supports conditional requests via ETag / If-None-Match.\n", "operationId": "getSimilarDocsCsv", "parameters": [{"$ref": "#/components/parameters/K"}, {"name": "doc_id", "in": "path", "required": true, "description": "Document identifier (label).", "schema": {"type": "string"}}], "responses": {"200": {"description": "CSV content", "headers": {"Etag": {"description": "ETag for the model view (phi/theta-based)", "schema": {"type": "string"}}}, "content": {"text/csv": {"schema": {"type": "string", "description": "CSV with header `doc,prob`"}, "examples": {"sample": {"value": "doc,prob\nsome_doc_id,0.876543\nother_doc_id,0.654321\n"}}}}}, "304": {"description": "Not Modified (If-None-Match matched)"}, "400": {"description": "Invalid model `k` (no model for k)"}}}}, "/{k}/topics/{topic_no}.json": {"get": {"tags": ["Models", "Topics", "Documents"], "summary": "Get top documents for a topic (JSON)", "description": "Returns a JSON array of documents associated with a topic in model `k`. Each returned document includes `id`, `label`, `metadata`, plus: - `prob`: similarity/probability value (as emitted by server) - `topics`: map of topic-id to probability for that document Supports `n` query parameter to limit the number of documents. Supports conditional requests via ETag / If-None-Match.\n", "operationId": "getTopicDocuments", "parameters": [{"$ref": "#/components/parameters/K"}, {"name": "topic_no", "in": "path", "required": true, "description": "Topic number.", "schema": {"type": "integer"}}, {"$ref": "#/components/parameters/N"}], "responses": {"200": {"description": "Array of documents with topic mixtures", "headers": {"Etag": {"description": "ETag for the model view (phi/theta-based)", "schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/DocWithTopics"}}}}}, "304": {"description": "Not Modified (If-None-Match matched)"}, "400": {"description": "Invalid model `k` (no model for k)"}}}}, "/{k}/docs_topics/{doc_id}.json": {"get": {"tags": ["Models", "Documents", "Topics"], "summary": "Get similar documents to a document (JSON)", "description": "Returns a JSON array of up to `n` documents most similar to the focal document `doc_id` in model `k`. Each document includes `id`, `label`, `metadata`, plus: - `prob` - `topics` (topic mixture map) Supports conditional requests via ETag / If-None-Match.\n", "operationId": "getDocNeighborsWithTopics", "parameters": [{"$ref": "#/components/parameters/K"}, {"name": "doc_id", "in": "path", "required": true, "description": "Document id; may include slashes (Bottle `<path>`).", "schema": {"type": "string"}}, {"$ref": "#/components/parameters/N"}], "responses": {"200": {"description": "Array of similar documents with topic mixtures", "headers": {"Etag": {"description": "ETag for the model view (phi/theta-based)", "schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/DocWithTopics"}}}}}, "304": {"description": "Not Modified (If-None-Match matched)"}, "400": {"description": "Invalid model `k` (no model for k)"}}}}, "/{k}/word_docs.json": {"get": {"tags": ["Models", "Documents"], "summary": "Get top documents matching a query string (JSON)", "description": "Returns a JSON array of up to `n` documents for model `k` based on a query `q` (server lowercases). Each document includes `id`, `label`, `metadata`, plus: - `prob` - `topics` (topic mixture map) Supports conditional requests via ETag / If-None-Match.\n", "operationId": "getWordDocs", "parameters": [{"$ref": "#/components/parameters/K"}, {"name": "q", "in": "query", "required": true, "description": "Query string used to retrieve documents.", "schema": {"type": "string"}}, {"$ref": "#/components/parameters/N"}], "responses": {"200": {"description": "Array of documents with topic mixtures", "headers": {"Etag": {"description": "ETag for the model view (phi/theta-based)", "schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/DocWithTopics"}}}}}, "304": {"description": "Not Modified (If-None-Match matched)"}, "400": {"description": "Invalid model `k` (no model for k)"}}}}, "/{k}/topics.json": {"get": {"tags": ["Models", "Topics"], "summary": "Get topic descriptors for a model (JSON)", "description": "Returns an object keyed by topic id (as string), each containing: - `color`: hex color for the topic - `words`: map word -> probability (top-N words) - `label`: display label Supports conditional requests via ETag / If-None-Match.\n", "operationId": "getTopicsForModel", "parameters": [{"$ref": "#/components/parameters/K"}], "responses": {"200": {"description": "Topic dictionary keyed by topic id (string)", "headers": {"Etag": {"description": "ETag for the model view (phi/theta-based)", "schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/TopicsResponse"}}}}, "304": {"description": "Not Modified (If-None-Match matched)"}, "400": {"description": "Invalid model `k` (no model for k)"}}}}, "/topics.json": {"get": {"tags": ["Topics"], "summary": "Get topic distances for a word query across all models (JSON)", "description": "Tokenizes query `q` (supports multiple tokenizer modes in server config), computes topic distances/similarities across all available models, merges and sorts, then returns an array of objects with: - `k`: model size (number of topics) - `t`: topic index - `distance`: distance/similarity value\n", "operationId": "getWordTopicDistances", "parameters": [{"name": "q", "in": "query", "required": true, "description": "Query string; server supports `|` to separate subqueries before tokenization.", "schema": {"type": "string", "example": "mind|consciousness"}}], "responses": {"200": {"description": "Array of (model, topic, distance) results", "content": {"application/json": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/WordTopicDistanceItem"}}}}}}}}, "/topics": {"get": {"tags": ["UI"], "summary": "Topics UI (HTML)", "description": "Returns an HTML page for viewing topic clusters.", "operationId": "getTopicsHtml", "responses": {"200": {"description": "HTML page", "content": {"text/html": {"schema": {"type": "string"}}}}}}}, "/topics.local.html": {"get": {"tags": ["UI"], "summary": "Topics UI for local embedding (HTML)", "description": "Returns an HTML page variant for local usage.", "operationId": "getTopicsLocalHtml", "responses": {"200": {"description": "HTML page", "content": {"text/html": {"schema": {"type": "string"}}}}}}}, "/docs.json": {"get": {"tags": ["Documents"], "summary": "List/search documents (JSON)", "description": "Returns document metadata structures. Query options (mutually combinable as in server code): - `q`: substring match against the document label (server may cap results) - `id`: request a specific document id - `random`: if present/truthy, returns a single random document (and disables caching) - `n`: limit number of results Supports conditional requests via corpus ETag / If-None-Match.\n", "operationId": "listDocs", "parameters": [{"name": "q", "in": "query", "required": false, "schema": {"type": "string"}, "description": "Substring query against document labels."}, {"name": "id", "in": "query", "required": false, "schema": {"type": "string"}, "description": "Specific document id to retrieve."}, {"name": "random", "in": "query", "required": false, "schema": {"type": "boolean"}, "description": "If true/present, return a random document."}, {"$ref": "#/components/parameters/NQuery"}], "responses": {"200": {"description": "Document list", "headers": {"Etag": {"description": "ETag for the corpus", "schema": {"type": "string"}}}, "content": {"application/json": {"schema": {"oneOf": [{"$ref": "#/components/schemas/DocList"}, {"$ref": "#/components/schemas/DocMap"}], "description": "Usually an array of documents; some internal calls use map form, but `/docs.json` returns the list form in typical usage.\n"}}}}, "304": {"description": "Not Modified (If-None-Match matched)"}}}}, "/icons.js": {"get": {"tags": ["UI"], "summary": "Icons JS", "description": "Returns a JavaScript resource used by the UI.", "operationId": "getIconsJs", "responses": {"200": {"description": "JavaScript file", "content": {"application/javascript": {"schema": {"type": "string"}}, "text/javascript": {"schema": {"type": "string"}}}}}}}, "/{k}": {"get": {"tags": ["UI", "Models"], "summary": "Redirect to model index", "description": "Redirects to `/{k}/`.", "operationId": "redirectModelIndex", "parameters": [{"$ref": "#/components/parameters/K"}], "responses": {"302": {"description": "Redirect"}}}}, "/{k}/": {"get": {"tags": ["UI", "Models"], "summary": "Model index (HTML)", "description": "Returns the HTML UI for a specific model `k`.", "operationId": "getModelIndex", "parameters": [{"$ref": "#/components/parameters/K"}], "responses": {"200": {"description": "HTML page", "content": {"text/html": {"schema": {"type": "string"}}}}}}}, "/cluster.csv": {"get": {"tags": ["UI"], "summary": "Cluster data (CSV)", "description": "Returns cluster CSV used by the UI.", "operationId": "getClusterCsv", "responses": {"200": {"description": "CSV content", "content": {"text/csv": {"schema": {"type": "string"}}}}}}}, "/description.md": {"get": {"tags": ["UI"], "summary": "Corpus description (Markdown)", "description": "Returns a Markdown description of the corpus/models.", "operationId": "getDescriptionMarkdown", "responses": {"200": {"description": "Markdown content", "content": {"text/markdown": {"schema": {"type": "string"}}, "text/plain": {"schema": {"type": "string"}}}}}}}, "/": {"get": {"tags": ["UI"], "summary": "Root page (HTML)", "description": "Root UI endpoint (cluster/home).", "operationId": "getRootHtml", "responses": {"200": {"description": "HTML page", "content": {"text/html": {"schema": {"type": "string"}}}}}}}, "/{filename}": {"get": {"tags": ["UI"], "summary": "Static file passthrough", "description": "Serves static files from the configured static root.", "operationId": "getStaticFile", "parameters": [{"name": "filename", "in": "path", "required": true, "description": "Path to static file (Bottle `<path>`).", "schema": {"type": "string"}}], "responses": {"200": {"description": "Static file", "content": {"*/*": {"schema": {"type": "string", "format": "binary"}}}}}}}, "/fulltext/{doc_id}": {"get": {"tags": ["Corpus"], "summary": "Fetch full text or PDF for a document", "description": "Serves document content from the corpus directory. If a corresponding PDF exists, it may serve the PDF; otherwise serves a `.txt` if available. Content type varies.\n", "operationId": "getFulltext", "parameters": [{"name": "doc_id", "in": "path", "required": true, "description": "Document path/id (Bottle `<path>`). `.txt` may be appended by the server.", "schema": {"type": "string"}}], "responses": {"200": {"description": "Document file (txt/pdf)", "content": {"*/*": {"schema": {"type": "string", "format": "binary"}}}}}}}}, "components": {"parameters": {"K": {"name": "k", "in": "path", "required": true, "description": "Model size (number of topics).", "schema": {"type": "integer", "minimum": 1}}, "N": {"name": "n", "in": "query", "required": false, "description": "Max number of results to return.", "schema": {"type": "integer", "minimum": 1, "default": 40}}, "NQuery": {"name": "n", "in": "query", "required": false, "description": "Max number of results to return.", "schema": {"type": "integer", "minimum": 1}}}, "schemas": {"Metadata": {"type": "object", "description": "Arbitrary metadata fields from the corpus.", "additionalProperties": {"oneOf": [{"type": "string"}, {"type": "number"}, {"type": "integer"}, {"type": "boolean"}, {"type": "null"}]}}, "DocSummary": {"type": "object", "required": ["id", "label", "metadata"], "properties": {"id": {"type": "string", "description": "Document identifier (label key used by server)."}, "label": {"type": "string", "description": "Human-readable label for the document."}, "metadata": {"$ref": "#/components/schemas/Metadata"}}}, "DocWithTopics": {"allOf": [{"$ref": "#/components/schemas/DocSummary"}, {"type": "object", "required": ["prob", "topics"], "properties": {"prob": {"type": "number", "format": "float", "description": "Probability/similarity score emitted by the server."}, "topics": {"type": "object", "description": "Map of topic id (string) to probability for this document.", "additionalProperties": {"type": "number", "format": "float"}}}}]}, "DocList": {"type": "array", "items": {"$ref": "#/components/schemas/DocSummary"}}, "DocMap": {"type": "object", "additionalProperties": {"$ref": "#/components/schemas/DocSummary"}}, "TopicWords": {"type": "object", "description": "Map of word -> probability for a topic.", "additionalProperties": {"type": "number", "format": "float"}}, "TopicEntry": {"type": "object", "required": ["color", "words", "label"], "properties": {"color": {"type": "string", "description": "Hex color for the topic (e.g. \"#RRGGBB\").", "pattern": "^#([A-Fa-f0-9]{6})$"}, "words": {"$ref": "#/components/schemas/TopicWords"}, "label": {"type": "string"}}}, "TopicsResponse": {"type": "object", "description": "Object keyed by topic id (string).", "additionalProperties": {"$ref": "#/components/schemas/TopicEntry"}}, "WordTopicDistanceItem": {"type": "object", "required": ["k", "t", "distance"], "properties": {"k": {"type": "integer", "description": "Model size (number of topics)."}, "t": {"type": "integer", "description": "Topic index within model."}, "distance": {"type": "number", "format": "float", "description": "Distance/similarity value (as computed by server)."}}}}}}
    </script>
    
    <script>
        
        var spec = JSON.parse(document.getElementById("spec").innerHTML);
        
        Redoc.init(spec);
    </script>
  </body>
</html>